<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>新建商票</title>
    <link rel="stylesheet" href="lib/layui/css/layui.css">


</head>

<body>
    <h1 style="margin: 50px;">新建商票</h1>
    <form class="layui-form" action="" style="width: 500px;margin:20px 150px;">

        <div class="layui-form-item">
            <label class="layui-form-label">出票日期</label>
            <input type="text" class="layui-input test-item" style="width: 190px;" placeholder="出票日期" id="issueDate">
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">汇票到期日</label>
            <input type="text" class="layui-input test-item" style="width: 190px;" placeholder="汇票到期日" id="expireDate">
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">票据金额</label>
            <div class="layui-input-block">
                <input type="number" min="100" name="title" required lay-verify="required" placeholder="票据金额，小写数字"
                    autocomplete="off" class="layui-input" style="width: 190px;" id="price">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">交易合同号</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="交易合同号" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="contractNumber">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">能否转让</label>
            <div class="layui-input-block" style="width: 190px;">
                <select name="city" lay-verify="required" id="giveWay" style="width: 190px;">
                    <option value="可以转让">可以转让</option>
                    <option value="不可转让">不可转让</option>
                </select>
            </div>
        </div>
        <label class="layui-form-label" style="width:100px;color: #009688">出票人信息：</label>
        <div class="layui-form-item">
            <label class="layui-form-label">全称</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="全称" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="issueUser">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">账号</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="账号" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="issueAccount">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">开户银行</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="开户银行" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="issueBank">
            </div>
        </div>
        <label class="layui-form-label" style="width:100px;color: #009688">收票人信息：</label>
        <div class="layui-form-item">
            <label class="layui-form-label">全称</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="全称" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="receiveUser">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">账号</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="账号" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="receiveAccount">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">开户银行</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="开户银行" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="receiveBank">
            </div>
        </div>
        <label class="layui-form-label" style="width:100px;color: #009688">出票保证信息：</label>
        <div class="layui-form-item">
            <label class="layui-form-label">保证人姓名</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="保证人姓名" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="ensurerName">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">保证人地址</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="保证人地址" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="ensurerAddress">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">保证日期</label>
            <input type="text" class="layui-input test-item" style="width: 190px;" placeholder="保证日期" id="ensureDate">
        </div>
        <label class="layui-form-label" style="width:100px;color: #009688">承兑人信息：</label>
        <div class="layui-form-item">
            <label class="layui-form-label">全称</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="全称" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="acceptancerUser">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">开户行行号</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="全称" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="acceptancerBankNum">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">账号</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="账号" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="acceptancerAccount">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">开户行名称</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" placeholder="开户行名称" autocomplete="off"
                    class="layui-input" style="width: 190px;" id="acceptancerBank">
            </div>
        </div>
        <label class="layui-form-label" style="width:100px;color: #009688">承兑信息：</label>
        <div class="layui-form-item">
            <label class="layui-form-label">出票人承诺</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" disabled value="本汇票请予以承兑，到期无条件付款"
                    autocomplete="off" class="layui-input" style="width: 250px;" id="issuePromise">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">承兑人承兑</label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="required" disabled value="本汇票已经承兑，到期无条件付款"
                    autocomplete="off" class="layui-input" style="width: 250px;" id="acceptancerAcceptance">
            </div>
        </div>
        <!-- <div class="layui-form-item">
            <div class="layui-input-block"> -->

        <!-- </div> -->
        <!-- </div> -->
    </form>
    <div class="layui-btn" lay-submit lay-filter="formDemo" id="submitBtn" style="margin:40px 250px;">提交</div>
    <!-- 你的HTML代码 -->

    <script src="lib/layui/layui.all.js"></script>
    <script src="lib/ajax.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

    <script>
        //由于模块都一次性加载，因此不用执行 layui.use() 来加载对应模块，直接使用即可：
        //执行一个laydate实例
        layui.use('laydate', function () {
            var laydate = layui.laydate;

            //执行一个laydate实例
            laydate.render({
                elem: '#ensureDate' //指定元素
                    ,
                trigger: 'click'
            });
            laydate.render({
                elem: '#expireDate' //指定元素
                    ,
                trigger: 'click'
            });
            laydate.render({
                elem: '#issueDate' //指定元素
                    ,
                trigger: 'click'
            });
        });

        //提交
        $("#submitBtn").click(function () {
            var user = JSON.parse(localStorage.getItem("user"));
            var parm = {
                "acceptancerAcceptance": $('#acceptancerAcceptance').val(),
                "acceptancerAccount": $('#acceptancerAccount').val(),
                "acceptancerBank": $('#acceptancerBank').val(),
                "acceptancerBankNum": $('#acceptancerBankNum').val(),
                "acceptancerUser": $('#acceptancerUser').val(),
                "confirm": 0,
                "ensureDate": $('#ensureDate').val(),
                "ensurerAddress": $('#ensurerAddress').val(),
                "ensurerName": $('#ensurerName').val(),
                "expireDate": $('#expireDate').val(),
                "giveWay": $('#giveWay').val(),
                "issueAccount": $('#issueAccount').val(),
                "issueBank": $('#issueBank').val(),
                "issueDate": $('#issueDate').val(),
                "issuePromise": $('#issuePromise').val(),
                "issueUser": $('#issueUser').val(),
                "price": $('#price').val(),
                "receiveAccount": $('#receiveAccount').val(),
                "receiveBank": $('#receiveBank').val(),
                "receiveUser": $('#receiveUser').val(),
                "contractNumber": $('#contractNumber').val(),
                "ticketState": '正常',
                "userId": user.id
            }
            //console.log("提交成功");
            console.log(parm);
            //parm为JSON对象
            res = postRequest("http://localhost:8089/v1/ticket/addTicket", parm);
            layer.msg(res.msg);
            setTimeout(function () {
                location.reload();
            }, 1000);

        });



        ! function () {
            var layer = layui.layer,
                form = layui.form;

        }();

    </script>
</body>

</html>